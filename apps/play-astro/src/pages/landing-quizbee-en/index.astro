---
import Layout from '../../layouts/Layout.astro';
import { Hero, Pains, Features, HowItWorks, FAQ, CTA } from '@cogisoft/ui-astro';
import content from './content.json';

const appUrl = import.meta.env.PUBLIC_APP_URL || 'http://localhost:3000';
const data = JSON.parse(JSON.stringify(content).replaceAll('{{APP_URL}}', appUrl));
const { meta, sections } = data;
---

<Layout>
  {sections.map((section, idx) => {
    switch (section.type) {
      case 'Hero':
        return <Hero {...section.props} />;
      case 'Pains':
        return <Pains {...section.props} />;
      case 'Features':
        return <Features {...section.props} />;
      case 'HowItWorks':
        return <HowItWorks {...section.props} />;
      case 'FAQ':
        return <FAQ {...section.props} />;
      case 'CTA':
        return <CTA {...section.props} />;
      default:
        return (
          <>
            {`<!-- Unknown section type: ${(section as any).type} at index ${idx} -->`}
          </>
        );
    }
  })}
</Layout>
